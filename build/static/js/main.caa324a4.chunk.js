(this["webpackJsonpreact-demo"]=this["webpackJsonpreact-demo"]||[]).push([[0],{20:function(e,t,a){e.exports=a(38)},25:function(e,t,a){},27:function(e,t,a){},38:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a.n(n),r=a(14),o=a.n(r),i=(a(25),a(11)),u=a.n(i),c=a(15),l=a(8),m=a(16),d=a(17),p=a(19),h=a(18),g=(a(27),a(7)),f=a.n(g),k={apiKey:"AIzaSyDXEX4wpvKWODAsJNG0WjBlnGHtyIUdXnw",authDomain:"general-development-purpose.firebaseapp.com",databaseURL:"https://general-development-purpose.firebaseio.com",projectId:"general-development-purpose",storageBucket:"general-development-purpose.appspot.com",messagingSenderId:"995124146105",appId:"1:995124146105:web:c48b020deb2c2a8793d068"},v=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).maxLength=40,n.allowedStrikes=3,n.defaultStrikes=new Array(n.allowedStrikes).fill({icon:"\u26aa",guess:""}),n.isClient=null!==new URL(window.location.href).searchParams.get("isClient"),n.handleKeyPress=function(e){var t=e.key.toUpperCase();1===t.length&&t.match(/[a-zA-Z]/)&&!n.state.guesses.includes(t)&&(console.log(t),n.guess(t))},n.pickAQuote=function(){console.log(n.state.quotes);var e=Math.floor(Math.random()*n.state.quotes.length);n.setState({currentQuote:n.state.quotes[e].text.toUpperCase(),quoteAuthor:n.state.quotes[e].author})},n.isRevealed=function(e){return e.match(/[a-zA-Z\s]/)?n.state.guesses.includes(e)||n.state.gameOver?e:"_":e},n.guess=function(e){if(n.isClient){if(console.log(e),n.setState({guesses:[].concat(Object(l.a)(n.state.guesses),[e])}),!n.state.currentQuote.includes(e)){var t=n.state.strikes;t.pop(),n.setState({strikes:[{icon:"\ud83d\udeab",guess:e}].concat(Object(l.a)(t))})}(n.strikeout()||n.puzzleComplete())&&n.setState({gameOver:!0})}else{var a=f.a.database().ref("/demo").push().key;f.a.database().ref("/demo/".concat(a)).set({letter:e}).then((function(e){}))}},n.newGame=Object(c.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.confirm("End this game and start a new one?")){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,f.a.database().ref("/demo").remove();case 5:n.pickAQuote(),n.setState({guesses:[],strikes:Object(l.a)(n.defaultStrikes),gameOver:!1});case 7:case"end":return e.stop()}}),e)}))),n.splitQuote=function(){return n.state.currentQuote.split(" ")},n.badGuesses=function(){return n.state.strikes.filter((function(e){return e.guess})).map((function(e){return e.guess}))},n.strikeout=function(){return n.badGuesses().length>=n.allowedStrikes},n.puzzleComplete=function(){return 0===n.unrevealed()},n.unrevealed=function(){return n.state.currentQuote.split("").filter((function(e){return e.match(/[a-zA-Z]/)&&!n.state.guesses.includes(e)})).length},n.message=function(){return n.state.gameOver?n.strikeout()?"\u274c You lost this round. Try again?":n.puzzleComplete()?"\ud83c\udf89 You win!":"\ud83d\ude2c Unforeseen error state, maybe try a new game?":"\u261d\ufe0f Pick a letter"},n.state={letters:Array.from("ABCDEFGHIJKLMNOPQRSTUVWXYZ"),quotes:[],currentQuote:"",quoteAuthor:"",guesses:[],strikes:Object(l.a)(n.defaultStrikes),gameOver:!1},n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;console.log("did mount"),f.a.initializeApp(k),f.a.database().ref("/demo").remove().then((function(){fetch("https://type.fit/api/quotes").then((function(e){return e.json()})).then((function(t){t=t.filter((function(t){return t.text.length<=e.maxLength})),e.setState({quotes:t}),e.pickAQuote(),e.isClient&&f.a.database().ref("/demo").on("child_added",(function(t){t.exists()&&(console.log(t.val()),e.guess(t.val().letter))}))}))}))}},{key:"render",value:function(){var e=this;return s.a.createElement("main",{id:"app",onKeyUp:this.handleKeyPress},s.a.createElement("div",{className:"container"},s.a.createElement("h3",null,"Simon Realtime Demo"),this.isClient&&s.a.createElement(s.a.Fragment,null,s.a.createElement("p",{id:"quote",className:(this.strikeout()?"strike ":"")+(this.puzzleComplete()?"highlight":"")},this.splitQuote().map((function(t,a){return s.a.createElement("span",{key:"word-".concat(a)},t.split("").map((function(t,a){return e.isRevealed(t)})))})),this.state.gameOver&&s.a.createElement("small",null,"\u2014",this.state.quoteAuthor)),s.a.createElement("div",{className:"status"},s.a.createElement("h2",null,"Strikes:"),s.a.createElement("ul",{className:"status"},this.state.strikes.map((function(e,t){return s.a.createElement("li",{key:"strike-".concat(t)},e.icon)}))))),!this.isClient&&s.a.createElement("div",{id:"button-board"},this.state.letters.map((function(t,a){return s.a.createElement("button",{className:(e.badGuesses().includes(t)?"strike ":"")+(e.state.guesses.includes(t)?"highlight":""),disabled:e.state.guesses.includes(t)||e.state.gameOver,onClick:function(a){return e.guess(t)},key:"button-".concat(a)},s.a.createElement("span",{className:"riser"},t),s.a.createElement("span",{className:"background"}))}))),this.isClient&&s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"status"},s.a.createElement("p",null,this.message())),s.a.createElement("button",{id:"new-game",className:this.state.gameOver?"highlight":"",onClick:function(t){return e.newGame()}},"New game"))))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(v,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[20,1,2]]]);
//# sourceMappingURL=main.caa324a4.chunk.js.map